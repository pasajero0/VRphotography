<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>tumblr.js - Documentation</title>

    <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/main.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="nav">
    <h2 class="home-link"><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><details open><summary><a href="TumblrClient.html">TumblrClient</a></summary><ul class='methods'><li data-type='method'><a href="TumblrClient.html#.blogInfo">blogInfo</a></li><li data-type='method'><a href="TumblrClient.html#.blogAvatar">blogAvatar</a></li><li data-type='method'><a href="TumblrClient.html#.blogLikes">blogLikes</a></li><li data-type='method'><a href="TumblrClient.html#.blogLikes">blogLikes</a></li><li data-type='method'><a href="TumblrClient.html#.blogPosts">blogPosts</a></li><li data-type='method'><a href="TumblrClient.html#.blogQueue">blogQueue</a></li><li data-type='method'><a href="TumblrClient.html#.blogDrafts">blogDrafts</a></li><li data-type='method'><a href="TumblrClient.html#.blogSubmissions">blogSubmissions</a></li><li data-type='method'><a href="TumblrClient.html#.userInfo">userInfo</a></li><li data-type='method'><a href="TumblrClient.html#.userDashboard">userDashboard</a></li><li data-type='method'><a href="TumblrClient.html#.userFollowing">userFollowing</a></li><li data-type='method'><a href="TumblrClient.html#.userLikes">userLikes</a></li><li data-type='method'><a href="TumblrClient.html#.taggedPosts">taggedPosts</a></li><li data-type='method'><a href="TumblrClient.html#.createPost">createPost</a></li><li data-type='method'><a href="TumblrClient.html#.editPost">editPost</a></li><li data-type='method'><a href="TumblrClient.html#.reblogPost">reblogPost</a></li><li data-type='method'><a href="TumblrClient.html#.deletePost">deletePost</a></li><li data-type='method'><a href="TumblrClient.html#.followBlog">followBlog</a></li><li data-type='method'><a href="TumblrClient.html#.unfollowBlog">unfollowBlog</a></li><li data-type='method'><a href="TumblrClient.html#.likePost">likePost</a></li><li data-type='method'><a href="TumblrClient.html#.unlikePost">unlikePost</a></li><li data-type='method'><a href="TumblrClient.html#.createTextPost">createTextPost</a></li><li data-type='method'><a href="TumblrClient.html#.createPhotoPost">createPhotoPost</a></li><li data-type='method'><a href="TumblrClient.html#.createQuotePost">createQuotePost</a></li><li data-type='method'><a href="TumblrClient.html#.createLinkPost">createLinkPost</a></li><li data-type='method'><a href="TumblrClient.html#.createLinkPost">createLinkPost</a></li><li data-type='method'><a href="TumblrClient.html#.createAudioPost">createAudioPost</a></li><li data-type='method'><a href="TumblrClient.html#.createVideoPost">createVideoPost</a></li><li data-type='method'><a href="TumblrClient.html#getRequest">getRequest</a></li><li data-type='method'><a href="TumblrClient.html#postRequest">postRequest</a></li><li data-type='method'><a href="TumblrClient.html#returnPromises">returnPromises</a></li><li data-type='method'><a href="TumblrClient.html#addGetMethods">addGetMethods</a></li><li data-type='method'><a href="TumblrClient.html#addPostMethods">addPostMethods</a></li></ul></details></li></ul><h3>Namespaces</h3><ul><li><details open><summary><a href="tumblr.html">tumblr</a></summary><ul class='members'><li data-type='member'><a href="tumblr.html#.Client">Client</a></li></ul><ul class='methods'><li data-type='method'><a href="tumblr.html#.createClient">createClient</a></li></ul></details></li></ul>
</nav>

<div id="main" class="main-container">
    
        <h1 class="page-title">tumblr.js</h1>
    

    



    
    <section>
        <article>
            <pre class="source linenums"><code><ol class="lines"><li id="line1" class="line"><span class="hljs-comment">/*!</span></li><li id="line2" class="line"><span class="hljs-comment"> * https://www.npmjs.com/package/tumblr.js</span></li><li id="line3" class="line"><span class="hljs-comment"> *</span></li><li id="line4" class="line"><span class="hljs-comment"> * &lt;3 always,</span></li><li id="line5" class="line"><span class="hljs-comment"> *     Tumblr</span></li><li id="line6" class="line"><span class="hljs-comment"> */</span></li><li id="line7" class="line"></li><li id="line8" class="line"><span class="hljs-comment">/**</span></li><li id="line9" class="line"><span class="hljs-comment"> * @namespace tumblr</span></li><li id="line10" class="line"><span class="hljs-comment"> */</span></li><li id="line11" class="line"></li><li id="line12" class="line"><span class="hljs-keyword">var</span> qs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'query-string'</span>);</li><li id="line13" class="line"><span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'request'</span>);</li><li id="line14" class="line"></li><li id="line15" class="line"><span class="hljs-keyword">var</span> get = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/get'</span>);</li><li id="line16" class="line"><span class="hljs-keyword">var</span> set = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/set'</span>);</li><li id="line17" class="line"><span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/keys'</span>);</li><li id="line18" class="line"><span class="hljs-keyword">var</span> intersection = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/intersection'</span>);</li><li id="line19" class="line"><span class="hljs-keyword">var</span> extend = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/extend'</span>);</li><li id="line20" class="line"><span class="hljs-keyword">var</span> reduce = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/reduce'</span>);</li><li id="line21" class="line"><span class="hljs-keyword">var</span> partial = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/partial'</span>);</li><li id="line22" class="line"><span class="hljs-keyword">var</span> zipObject = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/zipObject'</span>);</li><li id="line23" class="line"><span class="hljs-keyword">var</span> isString = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/isString'</span>);</li><li id="line24" class="line"><span class="hljs-keyword">var</span> isFunction = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/isFunction'</span>);</li><li id="line25" class="line"><span class="hljs-keyword">var</span> isArray = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/isArray'</span>);</li><li id="line26" class="line"><span class="hljs-keyword">var</span> isPlainObject = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/isPlainObject'</span>);</li><li id="line27" class="line"><span class="hljs-keyword">var</span> omit = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash/omit'</span>);</li><li id="line28" class="line"></li><li id="line29" class="line"><span class="hljs-keyword">var</span> CLIENT_VERSION = <span class="hljs-string">'1.0.0'</span>;</li><li id="line30" class="line"><span class="hljs-keyword">var</span> API_BASE_URL = <span class="hljs-string">'https://api.tumblr.com/v2'</span>;</li><li id="line31" class="line"></li><li id="line32" class="line"><span class="hljs-keyword">var</span> API_METHODS = {</li><li id="line33" class="line">    GET: {</li><li id="line34" class="line">        <span class="hljs-comment">/**</span></li><li id="line35" class="line"><span class="hljs-comment">         * Gets information about a given blog</span></li><li id="line36" class="line"><span class="hljs-comment">         *</span></li><li id="line37" class="line"><span class="hljs-comment">         * @method blogInfo</span></li><li id="line38" class="line"><span class="hljs-comment">         *</span></li><li id="line39" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line40" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional data sent with the request</span></li><li id="line41" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line42" class="line"><span class="hljs-comment">         *</span></li><li id="line43" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line44" class="line"><span class="hljs-comment">         *</span></li><li id="line45" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line46" class="line"><span class="hljs-comment">         */</span></li><li id="line47" class="line">        blogInfo: <span class="hljs-string">'/blog/:blogIdentifier/info'</span>,</li><li id="line48" class="line"></li><li id="line49" class="line">        <span class="hljs-comment">/**</span></li><li id="line50" class="line"><span class="hljs-comment">         * Gets the avatar URL for a blog</span></li><li id="line51" class="line"><span class="hljs-comment">         *</span></li><li id="line52" class="line"><span class="hljs-comment">         * @method blogAvatar</span></li><li id="line53" class="line"><span class="hljs-comment">         *</span></li><li id="line54" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line55" class="line"><span class="hljs-comment">         * @param  {number} [size] - avatar size, in pixels</span></li><li id="line56" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional data sent with the request</span></li><li id="line57" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line58" class="line"><span class="hljs-comment">         *</span></li><li id="line59" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line60" class="line"><span class="hljs-comment">         *</span></li><li id="line61" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line62" class="line"><span class="hljs-comment">         */</span></li><li id="line63" class="line">        blogAvatar: <span class="hljs-string">'/blog/:blogIdentifier/avatar/:size'</span>,</li><li id="line64" class="line"></li><li id="line65" class="line">        <span class="hljs-comment">/**</span></li><li id="line66" class="line"><span class="hljs-comment">         * Gets the likes for a blog</span></li><li id="line67" class="line"><span class="hljs-comment">         *</span></li><li id="line68" class="line"><span class="hljs-comment">         * @method blogLikes</span></li><li id="line69" class="line"><span class="hljs-comment">         *</span></li><li id="line70" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line71" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional data sent with the request</span></li><li id="line72" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line73" class="line"><span class="hljs-comment">         *</span></li><li id="line74" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line75" class="line"><span class="hljs-comment">         *</span></li><li id="line76" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line77" class="line"><span class="hljs-comment">         */</span></li><li id="line78" class="line">        blogLikes: <span class="hljs-string">'/blog/:blogIdentifier/likes'</span>,</li><li id="line79" class="line"></li><li id="line80" class="line">        <span class="hljs-comment">/**</span></li><li id="line81" class="line"><span class="hljs-comment">         * Gets the followers for a blog</span></li><li id="line82" class="line"><span class="hljs-comment">         *</span></li><li id="line83" class="line"><span class="hljs-comment">         * @method blogLikes</span></li><li id="line84" class="line"><span class="hljs-comment">         *</span></li><li id="line85" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line86" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional data sent with the request</span></li><li id="line87" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line88" class="line"><span class="hljs-comment">         *</span></li><li id="line89" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line90" class="line"><span class="hljs-comment">         *</span></li><li id="line91" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line92" class="line"><span class="hljs-comment">         */</span></li><li id="line93" class="line">        blogFollowers: <span class="hljs-string">'/blog/:blogIdentifier/followers'</span>,</li><li id="line94" class="line"></li><li id="line95" class="line">        <span class="hljs-comment">/**</span></li><li id="line96" class="line"><span class="hljs-comment">         * Gets a list of posts for a blog</span></li><li id="line97" class="line"><span class="hljs-comment">         *</span></li><li id="line98" class="line"><span class="hljs-comment">         * @method blogPosts</span></li><li id="line99" class="line"><span class="hljs-comment">         *</span></li><li id="line100" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line101" class="line"><span class="hljs-comment">         * @param  {string} [type] - filters returned posts to the specified type</span></li><li id="line102" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional data sent with the request</span></li><li id="line103" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line104" class="line"><span class="hljs-comment">         *</span></li><li id="line105" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line106" class="line"><span class="hljs-comment">         */</span></li><li id="line107" class="line">        blogPosts: <span class="hljs-string">'/blog/:blogIdentifier/posts/:type'</span>,</li><li id="line108" class="line"></li><li id="line109" class="line">        <span class="hljs-comment">/**</span></li><li id="line110" class="line"><span class="hljs-comment">         * Gets the queue for a blog</span></li><li id="line111" class="line"><span class="hljs-comment">         *</span></li><li id="line112" class="line"><span class="hljs-comment">         * @method blogQueue</span></li><li id="line113" class="line"><span class="hljs-comment">         *</span></li><li id="line114" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line115" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional data sent with the request</span></li><li id="line116" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line117" class="line"><span class="hljs-comment">         *</span></li><li id="line118" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line119" class="line"><span class="hljs-comment">         *</span></li><li id="line120" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line121" class="line"><span class="hljs-comment">         */</span></li><li id="line122" class="line">        blogQueue: <span class="hljs-string">'/blog/:blogIdentifier/posts/queue'</span>,</li><li id="line123" class="line"></li><li id="line124" class="line">        <span class="hljs-comment">/**</span></li><li id="line125" class="line"><span class="hljs-comment">         * Gets the drafts for a blog</span></li><li id="line126" class="line"><span class="hljs-comment">         *</span></li><li id="line127" class="line"><span class="hljs-comment">         * @method blogDrafts</span></li><li id="line128" class="line"><span class="hljs-comment">         *</span></li><li id="line129" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line130" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional data sent with the request</span></li><li id="line131" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line132" class="line"><span class="hljs-comment">         *</span></li><li id="line133" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line134" class="line"><span class="hljs-comment">         *</span></li><li id="line135" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line136" class="line"><span class="hljs-comment">         */</span></li><li id="line137" class="line">        blogDrafts: <span class="hljs-string">'/blog/:blogIdentifier/posts/draft'</span>,</li><li id="line138" class="line"></li><li id="line139" class="line">        <span class="hljs-comment">/**</span></li><li id="line140" class="line"><span class="hljs-comment">         * Gets the submissions for a blog</span></li><li id="line141" class="line"><span class="hljs-comment">         *</span></li><li id="line142" class="line"><span class="hljs-comment">         * @method blogSubmissions</span></li><li id="line143" class="line"><span class="hljs-comment">         *</span></li><li id="line144" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line145" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional parameters sent with the request</span></li><li id="line146" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line147" class="line"><span class="hljs-comment">         *</span></li><li id="line148" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line149" class="line"><span class="hljs-comment">         *</span></li><li id="line150" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line151" class="line"><span class="hljs-comment">         */</span></li><li id="line152" class="line">        blogSubmissions: <span class="hljs-string">'/blog/:blogIdentifier/posts/submission'</span>,</li><li id="line153" class="line"></li><li id="line154" class="line">        <span class="hljs-comment">/**</span></li><li id="line155" class="line"><span class="hljs-comment">         * Gets information about the authenticating user and their blogs</span></li><li id="line156" class="line"><span class="hljs-comment">         *</span></li><li id="line157" class="line"><span class="hljs-comment">         * @method userInfo</span></li><li id="line158" class="line"><span class="hljs-comment">         *</span></li><li id="line159" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional parameters sent with the request</span></li><li id="line160" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line161" class="line"><span class="hljs-comment">         *</span></li><li id="line162" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line163" class="line"><span class="hljs-comment">         *</span></li><li id="line164" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line165" class="line"><span class="hljs-comment">         */</span></li><li id="line166" class="line">        userInfo: <span class="hljs-string">'/user/info'</span>,</li><li id="line167" class="line"></li><li id="line168" class="line">        <span class="hljs-comment">/**</span></li><li id="line169" class="line"><span class="hljs-comment">         * Gets the dashboard posts for the authenticating user</span></li><li id="line170" class="line"><span class="hljs-comment">         *</span></li><li id="line171" class="line"><span class="hljs-comment">         * @method userDashboard</span></li><li id="line172" class="line"><span class="hljs-comment">         *</span></li><li id="line173" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional parameters sent with the request</span></li><li id="line174" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line175" class="line"><span class="hljs-comment">         *</span></li><li id="line176" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line177" class="line"><span class="hljs-comment">         *</span></li><li id="line178" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line179" class="line"><span class="hljs-comment">         */</span></li><li id="line180" class="line">        userDashboard: <span class="hljs-string">'/user/dashboard'</span>,</li><li id="line181" class="line"></li><li id="line182" class="line">        <span class="hljs-comment">/**</span></li><li id="line183" class="line"><span class="hljs-comment">         * Gets the blogs the authenticating user follows</span></li><li id="line184" class="line"><span class="hljs-comment">         *</span></li><li id="line185" class="line"><span class="hljs-comment">         * @method userFollowing</span></li><li id="line186" class="line"><span class="hljs-comment">         *</span></li><li id="line187" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional parameters sent with the request</span></li><li id="line188" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line189" class="line"><span class="hljs-comment">         *</span></li><li id="line190" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line191" class="line"><span class="hljs-comment">         *</span></li><li id="line192" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line193" class="line"><span class="hljs-comment">         */</span></li><li id="line194" class="line">        userFollowing: <span class="hljs-string">'/user/following'</span>,</li><li id="line195" class="line"></li><li id="line196" class="line">        <span class="hljs-comment">/**</span></li><li id="line197" class="line"><span class="hljs-comment">         * Gets the likes for the authenticating user</span></li><li id="line198" class="line"><span class="hljs-comment">         *</span></li><li id="line199" class="line"><span class="hljs-comment">         * @method userLikes</span></li><li id="line200" class="line"><span class="hljs-comment">         *</span></li><li id="line201" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional parameters sent with the request</span></li><li id="line202" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line203" class="line"><span class="hljs-comment">         *</span></li><li id="line204" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line205" class="line"><span class="hljs-comment">         *</span></li><li id="line206" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line207" class="line"><span class="hljs-comment">         */</span></li><li id="line208" class="line">        userLikes: <span class="hljs-string">'/user/likes'</span>,</li><li id="line209" class="line"></li><li id="line210" class="line">        <span class="hljs-comment">/**</span></li><li id="line211" class="line"><span class="hljs-comment">         * Gets posts tagged with the specified tag</span></li><li id="line212" class="line"><span class="hljs-comment">         *</span></li><li id="line213" class="line"><span class="hljs-comment">         * @method taggedPosts</span></li><li id="line214" class="line"><span class="hljs-comment">         *</span></li><li id="line215" class="line"><span class="hljs-comment">         * @param  {string} [tag] - tag to search for</span></li><li id="line216" class="line"><span class="hljs-comment">         * @param  {Object} [params] - optional parameters sent with the request</span></li><li id="line217" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line218" class="line"><span class="hljs-comment">         *</span></li><li id="line219" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line220" class="line"><span class="hljs-comment">         *</span></li><li id="line221" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line222" class="line"><span class="hljs-comment">         */</span></li><li id="line223" class="line">        taggedPosts: [<span class="hljs-string">'/tagged'</span>, [<span class="hljs-string">'tag'</span>]],</li><li id="line224" class="line">    },</li><li id="line225" class="line"></li><li id="line226" class="line">    POST: {</li><li id="line227" class="line">        <span class="hljs-comment">/**</span></li><li id="line228" class="line"><span class="hljs-comment">         * Creates a post on the given blog.</span></li><li id="line229" class="line"><span class="hljs-comment">         * See the {@link https://www.tumblr.com/docs/api/v2#posting|API docs} for more information</span></li><li id="line230" class="line"><span class="hljs-comment">         * about the parameters accepted.</span></li><li id="line231" class="line"><span class="hljs-comment">         *</span></li><li id="line232" class="line"><span class="hljs-comment">         * @method createPost</span></li><li id="line233" class="line"><span class="hljs-comment">         *</span></li><li id="line234" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line235" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line236" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line237" class="line"><span class="hljs-comment">         *</span></li><li id="line238" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line239" class="line"><span class="hljs-comment">         *</span></li><li id="line240" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line241" class="line"><span class="hljs-comment">         */</span></li><li id="line242" class="line">        createPost: <span class="hljs-string">'/blog/:blogIdentifier/post'</span>,</li><li id="line243" class="line"></li><li id="line244" class="line">        <span class="hljs-comment">/**</span></li><li id="line245" class="line"><span class="hljs-comment">         * Edits a given post</span></li><li id="line246" class="line"><span class="hljs-comment">         *</span></li><li id="line247" class="line"><span class="hljs-comment">         * @method editPost</span></li><li id="line248" class="line"><span class="hljs-comment">         *</span></li><li id="line249" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line250" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line251" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line252" class="line"><span class="hljs-comment">         *</span></li><li id="line253" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line254" class="line"><span class="hljs-comment">         *</span></li><li id="line255" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line256" class="line"><span class="hljs-comment">         */</span></li><li id="line257" class="line">        editPost: <span class="hljs-string">'/blog/:blogIdentifier/post/edit'</span>,</li><li id="line258" class="line"></li><li id="line259" class="line">        <span class="hljs-comment">/**</span></li><li id="line260" class="line"><span class="hljs-comment">         * Edits a given post</span></li><li id="line261" class="line"><span class="hljs-comment">         *</span></li><li id="line262" class="line"><span class="hljs-comment">         * @method reblogPost</span></li><li id="line263" class="line"><span class="hljs-comment">         *</span></li><li id="line264" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line265" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line266" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line267" class="line"><span class="hljs-comment">         *</span></li><li id="line268" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line269" class="line"><span class="hljs-comment">         *</span></li><li id="line270" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line271" class="line"><span class="hljs-comment">         */</span></li><li id="line272" class="line">        reblogPost: <span class="hljs-string">'/blog/:blogIdentifier/post/reblog'</span>,</li><li id="line273" class="line"></li><li id="line274" class="line">        <span class="hljs-comment">/**</span></li><li id="line275" class="line"><span class="hljs-comment">         * Edits a given post</span></li><li id="line276" class="line"><span class="hljs-comment">         *</span></li><li id="line277" class="line"><span class="hljs-comment">         * @method deletePost</span></li><li id="line278" class="line"><span class="hljs-comment">         *</span></li><li id="line279" class="line"><span class="hljs-comment">         * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line280" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line281" class="line"><span class="hljs-comment">         * @param  {Object} params.id - ID of the post to delete</span></li><li id="line282" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line283" class="line"><span class="hljs-comment">         *</span></li><li id="line284" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line285" class="line"><span class="hljs-comment">         *</span></li><li id="line286" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line287" class="line"><span class="hljs-comment">         */</span></li><li id="line288" class="line">        deletePost: [<span class="hljs-string">'/blog/:blogIdentifier/post/delete'</span>, [<span class="hljs-string">'id'</span>]],</li><li id="line289" class="line"></li><li id="line290" class="line">        <span class="hljs-comment">/**</span></li><li id="line291" class="line"><span class="hljs-comment">         * Follows a blog as the authenticating user</span></li><li id="line292" class="line"><span class="hljs-comment">         *</span></li><li id="line293" class="line"><span class="hljs-comment">         * @method followBlog</span></li><li id="line294" class="line"><span class="hljs-comment">         *</span></li><li id="line295" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line296" class="line"><span class="hljs-comment">         * @param  {Object} params.url - URL of the blog to follow</span></li><li id="line297" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line298" class="line"><span class="hljs-comment">         *</span></li><li id="line299" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line300" class="line"><span class="hljs-comment">         *</span></li><li id="line301" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line302" class="line"><span class="hljs-comment">         */</span></li><li id="line303" class="line">        followBlog: [<span class="hljs-string">'/user/follow'</span>, [<span class="hljs-string">'url'</span>]],</li><li id="line304" class="line"></li><li id="line305" class="line">        <span class="hljs-comment">/**</span></li><li id="line306" class="line"><span class="hljs-comment">         * Unfollows a blog as the authenticating user</span></li><li id="line307" class="line"><span class="hljs-comment">         *</span></li><li id="line308" class="line"><span class="hljs-comment">         * @method unfollowBlog</span></li><li id="line309" class="line"><span class="hljs-comment">         *</span></li><li id="line310" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line311" class="line"><span class="hljs-comment">         * @param  {Object} params.url - URL of the blog to unfollow</span></li><li id="line312" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line313" class="line"><span class="hljs-comment">         *</span></li><li id="line314" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line315" class="line"><span class="hljs-comment">         *</span></li><li id="line316" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line317" class="line"><span class="hljs-comment">         */</span></li><li id="line318" class="line">        unfollowBlog: [<span class="hljs-string">'/user/unfollow'</span>, [<span class="hljs-string">'url'</span>]],</li><li id="line319" class="line"></li><li id="line320" class="line">        <span class="hljs-comment">/**</span></li><li id="line321" class="line"><span class="hljs-comment">         * Likes a post as the authenticating user</span></li><li id="line322" class="line"><span class="hljs-comment">         *</span></li><li id="line323" class="line"><span class="hljs-comment">         * @method likePost</span></li><li id="line324" class="line"><span class="hljs-comment">         *</span></li><li id="line325" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line326" class="line"><span class="hljs-comment">         * @param  {Object} params.id - ID of the post to like</span></li><li id="line327" class="line"><span class="hljs-comment">         * @param  {Object} params.reblog_key - Reblog key for the post ID</span></li><li id="line328" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line329" class="line"><span class="hljs-comment">         *</span></li><li id="line330" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line331" class="line"><span class="hljs-comment">         *</span></li><li id="line332" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line333" class="line"><span class="hljs-comment">         */</span></li><li id="line334" class="line">        likePost: [<span class="hljs-string">'/user/like'</span>, [<span class="hljs-string">'id'</span>, <span class="hljs-string">'reblog_key'</span>]],</li><li id="line335" class="line"></li><li id="line336" class="line">        <span class="hljs-comment">/**</span></li><li id="line337" class="line"><span class="hljs-comment">         * Unlikes a post as the authenticating user</span></li><li id="line338" class="line"><span class="hljs-comment">         *</span></li><li id="line339" class="line"><span class="hljs-comment">         * @method unlikePost</span></li><li id="line340" class="line"><span class="hljs-comment">         *</span></li><li id="line341" class="line"><span class="hljs-comment">         * @param  {Object} params - parameters sent with the request</span></li><li id="line342" class="line"><span class="hljs-comment">         * @param  {Object} params.id - ID of the post to unlike</span></li><li id="line343" class="line"><span class="hljs-comment">         * @param  {Object} params.reblog_key - Reblog key for the post ID</span></li><li id="line344" class="line"><span class="hljs-comment">         * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line345" class="line"><span class="hljs-comment">         *</span></li><li id="line346" class="line"><span class="hljs-comment">         * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line347" class="line"><span class="hljs-comment">         *</span></li><li id="line348" class="line"><span class="hljs-comment">         * @memberof TumblrClient</span></li><li id="line349" class="line"><span class="hljs-comment">         */</span></li><li id="line350" class="line">        unlikePost: [<span class="hljs-string">'/user/unlike'</span>, [<span class="hljs-string">'id'</span>, <span class="hljs-string">'reblog_key'</span>]],</li><li id="line351" class="line">    },</li><li id="line352" class="line">};</li><li id="line353" class="line"></li><li id="line354" class="line"><span class="hljs-comment">/**</span></li><li id="line355" class="line"><span class="hljs-comment"> * Turns a blog name to a full blog URL</span></li><li id="line356" class="line"><span class="hljs-comment"> *</span></li><li id="line357" class="line"><span class="hljs-comment"> * @param  {string} blogUrl - blog name or URL</span></li><li id="line358" class="line"><span class="hljs-comment"> *</span></li><li id="line359" class="line"><span class="hljs-comment"> * @return {string} full blog URL</span></li><li id="line360" class="line"><span class="hljs-comment"> *</span></li><li id="line361" class="line"><span class="hljs-comment"> * @private</span></li><li id="line362" class="line"><span class="hljs-comment"> */</span></li><li id="line363" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forceFullBlogUrl</span>(<span class="hljs-params">blogUrl</span>) </span>{</li><li id="line364" class="line">    <span class="hljs-keyword">if</span> (blogUrl.indexOf(<span class="hljs-string">'.'</span>) &lt; <span class="hljs-number">0</span>) {</li><li id="line365" class="line">        blogUrl += <span class="hljs-string">'.tumblr.com'</span>;</li><li id="line366" class="line">    }</li><li id="line367" class="line">    <span class="hljs-keyword">return</span> blogUrl;</li><li id="line368" class="line">}</li><li id="line369" class="line"></li><li id="line370" class="line"><span class="hljs-comment">/**</span></li><li id="line371" class="line"><span class="hljs-comment"> * Creates a named function with the desired signature</span></li><li id="line372" class="line"><span class="hljs-comment"> *</span></li><li id="line373" class="line"><span class="hljs-comment"> * @param  {string} name - function name</span></li><li id="line374" class="line"><span class="hljs-comment"> * @param  {Array} [args] - array of argument names</span></li><li id="line375" class="line"><span class="hljs-comment"> * @param  {Function} fn - function that contains the logic that should run</span></li><li id="line376" class="line"><span class="hljs-comment"> *</span></li><li id="line377" class="line"><span class="hljs-comment"> * @return {Function} a named function that takes the desired arguments</span></li><li id="line378" class="line"><span class="hljs-comment"> *</span></li><li id="line379" class="line"><span class="hljs-comment"> * @private</span></li><li id="line380" class="line"><span class="hljs-comment"> */</span></li><li id="line381" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFunction</span>(<span class="hljs-params">name, args, fn</span>) </span>{</li><li id="line382" class="line">    <span class="hljs-keyword">if</span> (isFunction(args)) {</li><li id="line383" class="line">        fn = args;</li><li id="line384" class="line">        args = [];</li><li id="line385" class="line">    }</li><li id="line386" class="line"></li><li id="line387" class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">'body'</span>,</li><li id="line388" class="line">        <span class="hljs-string">'return function '</span> + name + <span class="hljs-string">'('</span> + args.join(<span class="hljs-string">', '</span>) + <span class="hljs-string">') { return body.apply(this, arguments); };'</span></li><li id="line389" class="line">    )(fn);</li><li id="line390" class="line">}</li><li id="line391" class="line"></li><li id="line392" class="line"><span class="hljs-comment">/**</span></li><li id="line393" class="line"><span class="hljs-comment"> * Take a callback-based function and returns a Promise instead</span></li><li id="line394" class="line"><span class="hljs-comment"> *</span></li><li id="line395" class="line"><span class="hljs-comment"> * @param  {Function} requestMethod - callback-based method to promisify</span></li><li id="line396" class="line"><span class="hljs-comment"> *</span></li><li id="line397" class="line"><span class="hljs-comment"> * @return {Function} function that returns a Promise that resolves with the response body or</span></li><li id="line398" class="line"><span class="hljs-comment"> *         rejects with the error message</span></li><li id="line399" class="line"><span class="hljs-comment"> *</span></li><li id="line400" class="line"><span class="hljs-comment"> * @private</span></li><li id="line401" class="line"><span class="hljs-comment"> */</span></li><li id="line402" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisifyRequest</span>(<span class="hljs-params">requestMethod</span>) </span>{</li><li id="line403" class="line">    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">apiPath, params, callback</span>) </span>{</li><li id="line404" class="line">        <span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>{</li><li id="line405" class="line">            requestMethod.call(<span class="hljs-keyword">this</span>, apiPath, params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, resp</span>) </span>{</li><li id="line406" class="line">                <span class="hljs-keyword">if</span> (err) {</li><li id="line407" class="line">                    reject(err);</li><li id="line408" class="line">                } <span class="hljs-keyword">else</span> {</li><li id="line409" class="line">                    resolve(resp);</li><li id="line410" class="line">                }</li><li id="line411" class="line">            });</li><li id="line412" class="line">        }.bind(<span class="hljs-keyword">this</span>));</li><li id="line413" class="line"></li><li id="line414" class="line">        <span class="hljs-keyword">if</span> (callback) {</li><li id="line415" class="line">            promise</li><li id="line416" class="line">                .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">body</span>) </span>{</li><li id="line417" class="line">                    callback(<span class="hljs-literal">null</span>, body);</li><li id="line418" class="line">                })</li><li id="line419" class="line">                .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{</li><li id="line420" class="line">                    callback(err, <span class="hljs-literal">null</span>);</li><li id="line421" class="line">                });</li><li id="line422" class="line">        }</li><li id="line423" class="line"></li><li id="line424" class="line">        <span class="hljs-keyword">return</span> promise;</li><li id="line425" class="line">    };</li><li id="line426" class="line">}</li><li id="line427" class="line"></li><li id="line428" class="line"><span class="hljs-comment">/**</span></li><li id="line429" class="line"><span class="hljs-comment"> * Wraps a function for use as a request callback</span></li><li id="line430" class="line"><span class="hljs-comment"> *</span></li><li id="line431" class="line"><span class="hljs-comment"> * @param  {TumblrClient~callback} callback - function to wrap</span></li><li id="line432" class="line"><span class="hljs-comment"> *</span></li><li id="line433" class="line"><span class="hljs-comment"> * @return {TumblrClient~callback} request callback</span></li><li id="line434" class="line"><span class="hljs-comment"> *</span></li><li id="line435" class="line"><span class="hljs-comment"> * @private</span></li><li id="line436" class="line"><span class="hljs-comment"> */</span></li><li id="line437" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">requestCallback</span>(<span class="hljs-params">callback</span>) </span>{</li><li id="line438" class="line">    <span class="hljs-keyword">if</span> (!callback) {</li><li id="line439" class="line">        <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li id="line440" class="line">    }</li><li id="line441" class="line"></li><li id="line442" class="line">    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, response, body</span>) </span>{</li><li id="line443" class="line">        <span class="hljs-keyword">if</span> (err) {</li><li id="line444" class="line">            <span class="hljs-keyword">return</span> callback(err, <span class="hljs-literal">null</span>, response);</li><li id="line445" class="line">        }</li><li id="line446" class="line"></li><li id="line447" class="line">        <span class="hljs-keyword">if</span> (response.statusCode &gt;= <span class="hljs-number">400</span>) {</li><li id="line448" class="line">            <span class="hljs-keyword">var</span> errString = body.meta ? body.meta.msg : body.error;</li><li id="line449" class="line">            <span class="hljs-keyword">return</span> callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'API error: '</span> + response.statusCode + <span class="hljs-string">' '</span> + errString), <span class="hljs-literal">null</span>, response);</li><li id="line450" class="line">        }</li><li id="line451" class="line"></li><li id="line452" class="line">        <span class="hljs-keyword">if</span> (body &amp;&amp; body.response) {</li><li id="line453" class="line">            <span class="hljs-keyword">return</span> callback(<span class="hljs-literal">null</span>, body.response, response);</li><li id="line454" class="line">        } <span class="hljs-keyword">else</span> {</li><li id="line455" class="line">            <span class="hljs-keyword">return</span> callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'API error (malformed API response): '</span> + body), <span class="hljs-literal">null</span>, response);</li><li id="line456" class="line">        }</li><li id="line457" class="line">    };</li><li id="line458" class="line">}</li><li id="line459" class="line"></li><li id="line460" class="line"><span class="hljs-comment">/**</span></li><li id="line461" class="line"><span class="hljs-comment"> * Make a get request</span></li><li id="line462" class="line"><span class="hljs-comment"> *</span></li><li id="line463" class="line"><span class="hljs-comment"> * @param  {Function} requestGet - function that performs a get request</span></li><li id="line464" class="line"><span class="hljs-comment"> * @param  {Object} credentials - OAuth credentials</span></li><li id="line465" class="line"><span class="hljs-comment"> * @param  {string} baseUrl - base URL for the request</span></li><li id="line466" class="line"><span class="hljs-comment"> * @param  {string} apiPath - URL path for the request</span></li><li id="line467" class="line"><span class="hljs-comment"> * @param  {Object} requestOptions - additional request options</span></li><li id="line468" class="line"><span class="hljs-comment"> * @param  {Object} params - query parameters</span></li><li id="line469" class="line"><span class="hljs-comment"> * @param  {TumblrClient~callback} callback - request callback</span></li><li id="line470" class="line"><span class="hljs-comment"> *</span></li><li id="line471" class="line"><span class="hljs-comment"> * @return {Request} Request object</span></li><li id="line472" class="line"><span class="hljs-comment"> *</span></li><li id="line473" class="line"><span class="hljs-comment"> * @private</span></li><li id="line474" class="line"><span class="hljs-comment"> */</span></li><li id="line475" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRequest</span>(<span class="hljs-params">requestGet, credentials, baseUrl, apiPath, requestOptions, params, callback</span>) </span>{</li><li id="line476" class="line">    params = params || {};</li><li id="line477" class="line"></li><li id="line478" class="line">    <span class="hljs-keyword">if</span> (credentials.consumer_key) {</li><li id="line479" class="line">        params.api_key = credentials.consumer_key;</li><li id="line480" class="line">    }</li><li id="line481" class="line"></li><li id="line482" class="line">    <span class="hljs-keyword">return</span> requestGet(extend({</li><li id="line483" class="line">        url: baseUrl + apiPath + <span class="hljs-string">'?'</span> + qs.stringify(params),</li><li id="line484" class="line">        oauth: credentials,</li><li id="line485" class="line">        json: <span class="hljs-literal">true</span>,</li><li id="line486" class="line">    }, requestOptions), requestCallback(callback));</li><li id="line487" class="line">}</li><li id="line488" class="line"></li><li id="line489" class="line"><span class="hljs-comment">/**</span></li><li id="line490" class="line"><span class="hljs-comment"> * Create a function to make POST requests to the Tumblr API</span></li><li id="line491" class="line"><span class="hljs-comment"> *</span></li><li id="line492" class="line"><span class="hljs-comment"> * @param  {Function} requestPost - function that performs a get request</span></li><li id="line493" class="line"><span class="hljs-comment"> * @param  {Object} credentials - OAuth credentials</span></li><li id="line494" class="line"><span class="hljs-comment"> * @param  {string} baseUrl - base URL for the request</span></li><li id="line495" class="line"><span class="hljs-comment"> * @param  {string} apiPath - URL path for the request</span></li><li id="line496" class="line"><span class="hljs-comment"> * @param  {Object} requestOptions - additional request options</span></li><li id="line497" class="line"><span class="hljs-comment"> * @param  {Object} params - form data</span></li><li id="line498" class="line"><span class="hljs-comment"> * @param  {TumblrClient~callback} callback - request callback</span></li><li id="line499" class="line"><span class="hljs-comment"> *</span></li><li id="line500" class="line"><span class="hljs-comment"> * @return {Request} Request object</span></li><li id="line501" class="line"><span class="hljs-comment"> *</span></li><li id="line502" class="line"><span class="hljs-comment"> * @private</span></li><li id="line503" class="line"><span class="hljs-comment"> */</span></li><li id="line504" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postRequest</span>(<span class="hljs-params">requestPost, credentials, baseUrl, apiPath, requestOptions, params, callback</span>) </span>{</li><li id="line505" class="line">    params = params || {};</li><li id="line506" class="line"></li><li id="line507" class="line">    <span class="hljs-comment">// Sign without multipart data</span></li><li id="line508" class="line">    <span class="hljs-keyword">var</span> currentRequest = requestPost(extend({</li><li id="line509" class="line">        url: baseUrl + apiPath,</li><li id="line510" class="line">        oauth: credentials,</li><li id="line511" class="line">    }, requestOptions), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, response, body</span>) </span>{</li><li id="line512" class="line">        <span class="hljs-keyword">try</span> {</li><li id="line513" class="line">            body = <span class="hljs-built_in">JSON</span>.parse(body);</li><li id="line514" class="line">        } <span class="hljs-keyword">catch</span> (e) {</li><li id="line515" class="line">            body = {</li><li id="line516" class="line">                error: <span class="hljs-string">'Malformed Response: '</span> + body,</li><li id="line517" class="line">            };</li><li id="line518" class="line">        }</li><li id="line519" class="line">        requestCallback(callback)(err, response, body);</li><li id="line520" class="line">    });</li><li id="line521" class="line"></li><li id="line522" class="line">    <span class="hljs-comment">// Sign it with the non-data parameters</span></li><li id="line523" class="line">    <span class="hljs-keyword">var</span> dataKeys = [<span class="hljs-string">'data'</span>];</li><li id="line524" class="line">    currentRequest.form(omit(params, dataKeys));</li><li id="line525" class="line">    currentRequest.oauth(credentials);</li><li id="line526" class="line"></li><li id="line527" class="line">    <span class="hljs-comment">// Clear the side effects from form(param)</span></li><li id="line528" class="line">    <span class="hljs-keyword">delete</span> currentRequest.headers[<span class="hljs-string">'content-type'</span>];</li><li id="line529" class="line">    <span class="hljs-keyword">delete</span> currentRequest.body;</li><li id="line530" class="line"></li><li id="line531" class="line">    <span class="hljs-comment">// And then add the full body</span></li><li id="line532" class="line">    <span class="hljs-keyword">var</span> form = currentRequest.form();</li><li id="line533" class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> params) {</li><li id="line534" class="line">        form.append(key, params[key]);</li><li id="line535" class="line">    }</li><li id="line536" class="line"></li><li id="line537" class="line">    <span class="hljs-comment">// Add the form header back</span></li><li id="line538" class="line">    extend(currentRequest.headers, form.getHeaders());</li><li id="line539" class="line"></li><li id="line540" class="line">    <span class="hljs-keyword">return</span> currentRequest;</li><li id="line541" class="line">}</li><li id="line542" class="line"></li><li id="line543" class="line"><span class="hljs-comment">/**</span></li><li id="line544" class="line"><span class="hljs-comment"> * Adds a request method to the client</span></li><li id="line545" class="line"><span class="hljs-comment"> *</span></li><li id="line546" class="line"><span class="hljs-comment"> * @param  {Object} client - add the method to this object</span></li><li id="line547" class="line"><span class="hljs-comment"> * @param  {string} methodName - the name of the method</span></li><li id="line548" class="line"><span class="hljs-comment"> * @param  {string} apiPath - the API route, which uses any colon-prefixed segments as arguments</span></li><li id="line549" class="line"><span class="hljs-comment"> * @param  {Array} paramNames - ordered list of required request parameters used as arguments</span></li><li id="line550" class="line"><span class="hljs-comment"> * @param  {String|Function} requestType - the request type or a function that makes the request</span></li><li id="line551" class="line"><span class="hljs-comment"> *</span></li><li id="line552" class="line"><span class="hljs-comment"> * @private</span></li><li id="line553" class="line"><span class="hljs-comment"> */</span></li><li id="line554" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addMethod</span>(<span class="hljs-params">client, methodName, apiPath, paramNames, requestType</span>) </span>{</li><li id="line555" class="line">    <span class="hljs-keyword">var</span> apiPathSplit = apiPath.split(<span class="hljs-string">'/'</span>);</li><li id="line556" class="line">    <span class="hljs-keyword">var</span> apiPathParamsCount = apiPath.split(<span class="hljs-regexp">/\/:[^\/]+/</span>).length - <span class="hljs-number">1</span>;</li><li id="line557" class="line"></li><li id="line558" class="line">    <span class="hljs-keyword">var</span> buildApiPath = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">args</span>) </span>{</li><li id="line559" class="line">        <span class="hljs-keyword">var</span> pathParamIndex = <span class="hljs-number">0</span>;</li><li id="line560" class="line">        <span class="hljs-keyword">return</span> reduce(apiPathSplit, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">apiPath, apiPathChunk, i</span>) </span>{</li><li id="line561" class="line">            <span class="hljs-comment">// Parse arguments in the path</span></li><li id="line562" class="line">            <span class="hljs-keyword">if</span> (apiPathChunk === <span class="hljs-string">':blogIdentifier'</span>) {</li><li id="line563" class="line">                <span class="hljs-comment">// Blog URLs are special</span></li><li id="line564" class="line">                apiPathChunk = forceFullBlogUrl(args[pathParamIndex++]);</li><li id="line565" class="line">            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (apiPathChunk[<span class="hljs-number">0</span>] === <span class="hljs-string">':'</span>) {</li><li id="line566" class="line">                apiPathChunk = args[pathParamIndex++];</li><li id="line567" class="line">            }</li><li id="line568" class="line"></li><li id="line569" class="line">            <span class="hljs-keyword">if</span> (apiPathChunk) {</li><li id="line570" class="line">                <span class="hljs-keyword">return</span> apiPath + <span class="hljs-string">'/'</span> + apiPathChunk;</li><li id="line571" class="line">            } <span class="hljs-keyword">else</span> {</li><li id="line572" class="line">                <span class="hljs-keyword">return</span> apiPath;</li><li id="line573" class="line">            }</li><li id="line574" class="line">        }, <span class="hljs-string">''</span>);</li><li id="line575" class="line">    };</li><li id="line576" class="line"></li><li id="line577" class="line">    <span class="hljs-keyword">var</span> namedParams = (apiPath.match(<span class="hljs-regexp">/\/:[^\/]+/g</span>) || []).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">param</span>) </span>{</li><li id="line578" class="line">        <span class="hljs-keyword">return</span> param.substr(<span class="hljs-number">2</span>);</li><li id="line579" class="line">    }).concat(paramNames, <span class="hljs-string">'params'</span>, <span class="hljs-string">'callback'</span>);</li><li id="line580" class="line"></li><li id="line581" class="line">    <span class="hljs-keyword">var</span> methodBody = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line582" class="line">        <span class="hljs-keyword">var</span> argsLength = <span class="hljs-built_in">arguments</span>.length;</li><li id="line583" class="line">        <span class="hljs-keyword">var</span> args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(argsLength);</li><li id="line584" class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; argsLength; i++) {</li><li id="line585" class="line">            args[i] = <span class="hljs-built_in">arguments</span>[i];</li><li id="line586" class="line">        }</li><li id="line587" class="line"></li><li id="line588" class="line">        <span class="hljs-keyword">var</span> requiredParamsStart = apiPathParamsCount;</li><li id="line589" class="line">        <span class="hljs-keyword">var</span> requiredParamsEnd = requiredParamsStart + paramNames.length;</li><li id="line590" class="line">        <span class="hljs-keyword">var</span> requiredParamArgs = args.slice(requiredParamsStart, requiredParamsEnd);</li><li id="line591" class="line"></li><li id="line592" class="line">        <span class="hljs-comment">// Callback is at the end</span></li><li id="line593" class="line">        <span class="hljs-keyword">var</span> callback = isFunction(args[args.length - <span class="hljs-number">1</span>]) ? args.pop() : <span class="hljs-literal">null</span>;</li><li id="line594" class="line"></li><li id="line595" class="line">        <span class="hljs-comment">// Required Parmas</span></li><li id="line596" class="line">        <span class="hljs-keyword">var</span> params = zipObject(paramNames, requiredParamArgs);</li><li id="line597" class="line">        extend(params, isPlainObject(args[args.length - <span class="hljs-number">1</span>]) ? args.pop() : {});</li><li id="line598" class="line"></li><li id="line599" class="line">        <span class="hljs-comment">// Path arguments are determined after required parameters</span></li><li id="line600" class="line">        <span class="hljs-keyword">var</span> apiPathArgs = args.slice(<span class="hljs-number">0</span>, apiPathParamsCount);</li><li id="line601" class="line"></li><li id="line602" class="line">        <span class="hljs-keyword">var</span> request = requestType;</li><li id="line603" class="line">        <span class="hljs-keyword">if</span> (isString(requestType)) {</li><li id="line604" class="line">            request = requestType.toUpperCase() === <span class="hljs-string">'POST'</span> ? client.postRequest : client.getRequest;</li><li id="line605" class="line">        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!isFunction(requestType)) {</li><li id="line606" class="line">            request = client.getRequest;</li><li id="line607" class="line">        }</li><li id="line608" class="line"></li><li id="line609" class="line">        <span class="hljs-keyword">return</span> request.call(client, buildApiPath(apiPathArgs), params, callback);</li><li id="line610" class="line">    };</li><li id="line611" class="line"></li><li id="line612" class="line">    set(client, methodName, createFunction(methodName, namedParams, methodBody));</li><li id="line613" class="line">}</li><li id="line614" class="line"></li><li id="line615" class="line"><span class="hljs-comment">/**</span></li><li id="line616" class="line"><span class="hljs-comment"> * Adds methods to the client</span></li><li id="line617" class="line"><span class="hljs-comment"> *</span></li><li id="line618" class="line"><span class="hljs-comment"> * @param  {TumblrClient} client - an instance of the `tumblr.js` API client</span></li><li id="line619" class="line"><span class="hljs-comment"> * @param  {Object} methods - mapping of method names to endpoints. Endpoints can be a string or an</span></li><li id="line620" class="line"><span class="hljs-comment"> *         array of format `[apiPathString, requireParamsArray]`</span></li><li id="line621" class="line"><span class="hljs-comment"> * @param  {String|Function} requestType - the request type or a function that makes the request</span></li><li id="line622" class="line"><span class="hljs-comment"> *</span></li><li id="line623" class="line"><span class="hljs-comment"> * @private</span></li><li id="line624" class="line"><span class="hljs-comment"> */</span></li><li id="line625" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addMethods</span>(<span class="hljs-params">client, methods, requestType</span>) </span>{</li><li id="line626" class="line">    <span class="hljs-keyword">var</span> apiPath, paramNames;</li><li id="line627" class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> methodName <span class="hljs-keyword">in</span> methods) {</li><li id="line628" class="line">        apiPath = methods[methodName];</li><li id="line629" class="line">        <span class="hljs-keyword">if</span> (isString(apiPath)) {</li><li id="line630" class="line">            paramNames = [];</li><li id="line631" class="line">        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isPlainObject(apiPath)) {</li><li id="line632" class="line">            paramNames = apiPath.paramNames || [];</li><li id="line633" class="line">            apiPath = apiPath.path;</li><li id="line634" class="line">        } <span class="hljs-keyword">else</span> {</li><li id="line635" class="line">            paramNames = apiPath[<span class="hljs-number">1</span>] || [];</li><li id="line636" class="line">            apiPath = apiPath[<span class="hljs-number">0</span>];</li><li id="line637" class="line">        }</li><li id="line638" class="line">        addMethod(client, methodName, apiPath, paramNames, requestType || <span class="hljs-string">'GET'</span>);</li><li id="line639" class="line">    }</li><li id="line640" class="line">}</li><li id="line641" class="line"></li><li id="line642" class="line"><span class="hljs-comment">/**</span></li><li id="line643" class="line"><span class="hljs-comment"> * Wraps createPost to specify `type` and validate the parameters</span></li><li id="line644" class="line"><span class="hljs-comment"> *</span></li><li id="line645" class="line"><span class="hljs-comment"> * @param  {string} type - post type</span></li><li id="line646" class="line"><span class="hljs-comment"> * @param  {Function} [validate] - returns `true` if the parameters validate</span></li><li id="line647" class="line"><span class="hljs-comment"> *</span></li><li id="line648" class="line"><span class="hljs-comment"> * @return {Function} wrapped function</span></li><li id="line649" class="line"><span class="hljs-comment"> *</span></li><li id="line650" class="line"><span class="hljs-comment"> * @private</span></li><li id="line651" class="line"><span class="hljs-comment"> */</span></li><li id="line652" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapCreatePost</span>(<span class="hljs-params">type, validate</span>) </span>{</li><li id="line653" class="line">    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">blogIdentifier, params, callback</span>) </span>{</li><li id="line654" class="line">        params = extend({type: type}, params);</li><li id="line655" class="line"></li><li id="line656" class="line">        <span class="hljs-keyword">if</span> (isArray(validate)) {</li><li id="line657" class="line">            validate = partial(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params, requireKeys</span>) </span>{</li><li id="line658" class="line">                <span class="hljs-keyword">if</span> (requireKeys.length) {</li><li id="line659" class="line">                    <span class="hljs-keyword">var</span> keyIntersection = intersection(keys(params), requireKeys);</li><li id="line660" class="line">                    <span class="hljs-keyword">if</span> (requireKeys.length === <span class="hljs-number">1</span> &amp;&amp; !keyIntersection.length) {</li><li id="line661" class="line">                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Missing required field: '</span> + requireKeys[<span class="hljs-number">0</span>]);</li><li id="line662" class="line">                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!keyIntersection.length) {</li><li id="line663" class="line">                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Missing one of: '</span> + requireKeys.join(<span class="hljs-string">', '</span>));</li><li id="line664" class="line">                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (keyIntersection.length &gt; <span class="hljs-number">1</span>) {</li><li id="line665" class="line">                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Can only use one of: '</span> + requireKeys.join(<span class="hljs-string">', '</span>));</li><li id="line666" class="line">                    }</li><li id="line667" class="line">                }</li><li id="line668" class="line">                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li id="line669" class="line">            }, params, validate);</li><li id="line670" class="line">        }</li><li id="line671" class="line"></li><li id="line672" class="line">        <span class="hljs-keyword">if</span> (isFunction(validate)) {</li><li id="line673" class="line">            <span class="hljs-keyword">if</span> (!validate(params)) {</li><li id="line674" class="line">                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Error validating parameters'</span>);</li><li id="line675" class="line">            }</li><li id="line676" class="line">        }</li><li id="line677" class="line"></li><li id="line678" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">2</span>) {</li><li id="line679" class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.createPost(blogIdentifier, params, callback);</li><li id="line680" class="line">        } <span class="hljs-keyword">else</span> {</li><li id="line681" class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.createPost(blogIdentifier, params);</li><li id="line682" class="line">        }</li><li id="line683" class="line">    };</li><li id="line684" class="line">}</li><li id="line685" class="line"></li><li id="line686" class="line"><span class="hljs-comment">/**</span></li><li id="line687" class="line"><span class="hljs-comment"> * Creates a Tumblr API client using the given options</span></li><li id="line688" class="line"><span class="hljs-comment"> *</span></li><li id="line689" class="line"><span class="hljs-comment"> * @param  {Object} [options] - client options</span></li><li id="line690" class="line"><span class="hljs-comment"> * @param  {Object} [options.credentials] - OAuth credentials</span></li><li id="line691" class="line"><span class="hljs-comment"> * @param  {string} [options.baseUrl] - API base URL</span></li><li id="line692" class="line"><span class="hljs-comment"> * @param  {Object} [options.request] - library to use for making requests</span></li><li id="line693" class="line"><span class="hljs-comment"> *</span></li><li id="line694" class="line"><span class="hljs-comment"> * @constructor</span></li><li id="line695" class="line"><span class="hljs-comment"> */</span></li><li id="line696" class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TumblrClient</span>(<span class="hljs-params">options</span>) </span>{</li><li id="line697" class="line">    <span class="hljs-comment">// Support for `TumblrClient(credentials, baseUrl, requestLibrary)`</span></li><li id="line698" class="line">    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>) {</li><li id="line699" class="line">        options = {</li><li id="line700" class="line">            credentials: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],</li><li id="line701" class="line">            baseUrl: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>],</li><li id="line702" class="line">            request: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>],</li><li id="line703" class="line">            returnPromises: <span class="hljs-literal">false</span>,</li><li id="line704" class="line">        };</li><li id="line705" class="line">    }</li><li id="line706" class="line"></li><li id="line707" class="line">    options = options || {};</li><li id="line708" class="line"></li><li id="line709" class="line">    <span class="hljs-keyword">this</span>.version = CLIENT_VERSION;</li><li id="line710" class="line">    <span class="hljs-keyword">this</span>.credentials = get(options, <span class="hljs-string">'credentials'</span>, omit(options, <span class="hljs-string">'baseUrl'</span>, <span class="hljs-string">'request'</span>));</li><li id="line711" class="line">    <span class="hljs-keyword">this</span>.baseUrl = get(options, <span class="hljs-string">'baseUrl'</span>, API_BASE_URL);</li><li id="line712" class="line">    <span class="hljs-keyword">this</span>.request = get(options, <span class="hljs-string">'request'</span>, request);</li><li id="line713" class="line">    <span class="hljs-keyword">this</span>.requestOptions = {</li><li id="line714" class="line">        followRedirect: <span class="hljs-literal">false</span>,</li><li id="line715" class="line">        headers: {</li><li id="line716" class="line">            <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'tumblr.js/'</span> + CLIENT_VERSION,</li><li id="line717" class="line">        },</li><li id="line718" class="line">    };</li><li id="line719" class="line"></li><li id="line720" class="line">    <span class="hljs-keyword">this</span>.addGetMethods(API_METHODS.GET);</li><li id="line721" class="line">    <span class="hljs-keyword">this</span>.addPostMethods(API_METHODS.POST);</li><li id="line722" class="line"></li><li id="line723" class="line">    <span class="hljs-comment">/**</span></li><li id="line724" class="line"><span class="hljs-comment">     * Creates a text post on the given blog</span></li><li id="line725" class="line"><span class="hljs-comment">     *</span></li><li id="line726" class="line"><span class="hljs-comment">     * @see {@link https://www.tumblr.com/docs/api/v2#ptext-posts|API docs}</span></li><li id="line727" class="line"><span class="hljs-comment">     *</span></li><li id="line728" class="line"><span class="hljs-comment">     * @method createTextPost</span></li><li id="line729" class="line"><span class="hljs-comment">     *</span></li><li id="line730" class="line"><span class="hljs-comment">     * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line731" class="line"><span class="hljs-comment">     * @param  {Object} params - parameters sent with the request</span></li><li id="line732" class="line"><span class="hljs-comment">     * @param  {string} [params.title] - post title text</span></li><li id="line733" class="line"><span class="hljs-comment">     * @param  {string} params.body - post body text</span></li><li id="line734" class="line"><span class="hljs-comment">     * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line735" class="line"><span class="hljs-comment">     *</span></li><li id="line736" class="line"><span class="hljs-comment">     * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line737" class="line"><span class="hljs-comment">     *</span></li><li id="line738" class="line"><span class="hljs-comment">     * @memberof TumblrClient</span></li><li id="line739" class="line"><span class="hljs-comment">     */</span></li><li id="line740" class="line">    <span class="hljs-keyword">this</span>.createTextPost = wrapCreatePost(<span class="hljs-string">'text'</span>, [<span class="hljs-string">'body'</span>]);</li><li id="line741" class="line"></li><li id="line742" class="line">    <span class="hljs-comment">/**</span></li><li id="line743" class="line"><span class="hljs-comment">     * Creates a photo post on the given blog</span></li><li id="line744" class="line"><span class="hljs-comment">     *</span></li><li id="line745" class="line"><span class="hljs-comment">     * @see {@link https://www.tumblr.com/docs/api/v2#pphoto-posts|API docs}</span></li><li id="line746" class="line"><span class="hljs-comment">     *</span></li><li id="line747" class="line"><span class="hljs-comment">     * @method createPhotoPost</span></li><li id="line748" class="line"><span class="hljs-comment">     *</span></li><li id="line749" class="line"><span class="hljs-comment">     * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line750" class="line"><span class="hljs-comment">     * @param  {Object} params - parameters sent with the request</span></li><li id="line751" class="line"><span class="hljs-comment">     * @param  {string} params.source - image source URL</span></li><li id="line752" class="line"><span class="hljs-comment">     * @param  {Stream|Array} params.data - an image or array of images</span></li><li id="line753" class="line"><span class="hljs-comment">     * @param  {string} params.data64 - base64-encoded image data</span></li><li id="line754" class="line"><span class="hljs-comment">     * @param  {string} [params.caption] - post caption text</span></li><li id="line755" class="line"><span class="hljs-comment">     * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line756" class="line"><span class="hljs-comment">     *</span></li><li id="line757" class="line"><span class="hljs-comment">     * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line758" class="line"><span class="hljs-comment">     *</span></li><li id="line759" class="line"><span class="hljs-comment">     * @memberof TumblrClient</span></li><li id="line760" class="line"><span class="hljs-comment">     */</span></li><li id="line761" class="line">    <span class="hljs-keyword">this</span>.createPhotoPost = wrapCreatePost(<span class="hljs-string">'photo'</span>, [<span class="hljs-string">'data'</span>, <span class="hljs-string">'data64'</span>, <span class="hljs-string">'source'</span>]);</li><li id="line762" class="line"></li><li id="line763" class="line">    <span class="hljs-comment">/**</span></li><li id="line764" class="line"><span class="hljs-comment">     * Creates a quote post on the given blog</span></li><li id="line765" class="line"><span class="hljs-comment">     *</span></li><li id="line766" class="line"><span class="hljs-comment">     * @see {@link https://www.tumblr.com/docs/api/v2#pquote-posts|API docs}</span></li><li id="line767" class="line"><span class="hljs-comment">     *</span></li><li id="line768" class="line"><span class="hljs-comment">     * @method createQuotePost</span></li><li id="line769" class="line"><span class="hljs-comment">     *</span></li><li id="line770" class="line"><span class="hljs-comment">     * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line771" class="line"><span class="hljs-comment">     * @param  {Object} params - parameters sent with the request</span></li><li id="line772" class="line"><span class="hljs-comment">     * @param  {string} params.quote - quote text</span></li><li id="line773" class="line"><span class="hljs-comment">     * @param  {string} [params.source] - quote source</span></li><li id="line774" class="line"><span class="hljs-comment">     * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line775" class="line"><span class="hljs-comment">     *</span></li><li id="line776" class="line"><span class="hljs-comment">     * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line777" class="line"><span class="hljs-comment">     *</span></li><li id="line778" class="line"><span class="hljs-comment">     * @memberof TumblrClient</span></li><li id="line779" class="line"><span class="hljs-comment">     */</span></li><li id="line780" class="line">    <span class="hljs-keyword">this</span>.createQuotePost = wrapCreatePost(<span class="hljs-string">'quote'</span>, [<span class="hljs-string">'quote'</span>]);</li><li id="line781" class="line"></li><li id="line782" class="line">    <span class="hljs-comment">/**</span></li><li id="line783" class="line"><span class="hljs-comment">     * Creates a link post on the given blog</span></li><li id="line784" class="line"><span class="hljs-comment">     *</span></li><li id="line785" class="line"><span class="hljs-comment">     * @see {@link https://www.tumblr.com/docs/api/v2#plink-posts|API docs}</span></li><li id="line786" class="line"><span class="hljs-comment">     *</span></li><li id="line787" class="line"><span class="hljs-comment">     * @method createLinkPost</span></li><li id="line788" class="line"><span class="hljs-comment">     *</span></li><li id="line789" class="line"><span class="hljs-comment">     * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line790" class="line"><span class="hljs-comment">     * @param  {Object} params - parameters sent with the request</span></li><li id="line791" class="line"><span class="hljs-comment">     * @param  {string} [params.title] - post title text</span></li><li id="line792" class="line"><span class="hljs-comment">     * @param  {string} params.url - the link URL</span></li><li id="line793" class="line"><span class="hljs-comment">     * @param  {string} [params.thumbnail] - the URL of an image to use as the thumbnail</span></li><li id="line794" class="line"><span class="hljs-comment">     * @param  {string} [params.excerpt] - an excerpt from the page the link points to</span></li><li id="line795" class="line"><span class="hljs-comment">     * @param  {string} [params.author] - the name of the author of the page the link points to</span></li><li id="line796" class="line"><span class="hljs-comment">     * @param  {string} [params.description] - post caption text</span></li><li id="line797" class="line"><span class="hljs-comment">     * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line798" class="line"><span class="hljs-comment">     *</span></li><li id="line799" class="line"><span class="hljs-comment">     * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line800" class="line"><span class="hljs-comment">     *</span></li><li id="line801" class="line"><span class="hljs-comment">     * @memberof TumblrClient</span></li><li id="line802" class="line"><span class="hljs-comment">     */</span></li><li id="line803" class="line">    <span class="hljs-keyword">this</span>.createLinkPost = wrapCreatePost(<span class="hljs-string">'link'</span>, [<span class="hljs-string">'url'</span>]);</li><li id="line804" class="line"></li><li id="line805" class="line">    <span class="hljs-comment">/**</span></li><li id="line806" class="line"><span class="hljs-comment">     * Creates a chat post on the given blog</span></li><li id="line807" class="line"><span class="hljs-comment">     *</span></li><li id="line808" class="line"><span class="hljs-comment">     * @see {@link https://www.tumblr.com/docs/api/v2#pchat-posts|API docs}</span></li><li id="line809" class="line"><span class="hljs-comment">     *</span></li><li id="line810" class="line"><span class="hljs-comment">     * @method createLinkPost</span></li><li id="line811" class="line"><span class="hljs-comment">     *</span></li><li id="line812" class="line"><span class="hljs-comment">     * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line813" class="line"><span class="hljs-comment">     * @param  {Object} params - parameters sent with the request</span></li><li id="line814" class="line"><span class="hljs-comment">     * @param  {string} [params.title] - post title text</span></li><li id="line815" class="line"><span class="hljs-comment">     * @param  {string} params.conversation - chat text</span></li><li id="line816" class="line"><span class="hljs-comment">     * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line817" class="line"><span class="hljs-comment">     *</span></li><li id="line818" class="line"><span class="hljs-comment">     * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line819" class="line"><span class="hljs-comment">     *</span></li><li id="line820" class="line"><span class="hljs-comment">     * @memberof TumblrClient</span></li><li id="line821" class="line"><span class="hljs-comment">     */</span></li><li id="line822" class="line">    <span class="hljs-keyword">this</span>.createChatPost = wrapCreatePost(<span class="hljs-string">'chat'</span>, [<span class="hljs-string">'conversation'</span>]);</li><li id="line823" class="line"></li><li id="line824" class="line">    <span class="hljs-comment">/**</span></li><li id="line825" class="line"><span class="hljs-comment">     * Creates a photo post on the given blog</span></li><li id="line826" class="line"><span class="hljs-comment">     *</span></li><li id="line827" class="line"><span class="hljs-comment">     * @see {@link https://www.tumblr.com/docs/api/v2#paudio-posts|API docs}</span></li><li id="line828" class="line"><span class="hljs-comment">     *</span></li><li id="line829" class="line"><span class="hljs-comment">     * @method createAudioPost</span></li><li id="line830" class="line"><span class="hljs-comment">     *</span></li><li id="line831" class="line"><span class="hljs-comment">     * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line832" class="line"><span class="hljs-comment">     * @param  {Object} params - parameters sent with the request</span></li><li id="line833" class="line"><span class="hljs-comment">     * @param  {string} params.external_url - image source URL</span></li><li id="line834" class="line"><span class="hljs-comment">     * @param  {Stream} params.data - an audio file</span></li><li id="line835" class="line"><span class="hljs-comment">     * @param  {string} [params.caption] - post caption text</span></li><li id="line836" class="line"><span class="hljs-comment">     * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line837" class="line"><span class="hljs-comment">     *</span></li><li id="line838" class="line"><span class="hljs-comment">     * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line839" class="line"><span class="hljs-comment">     *</span></li><li id="line840" class="line"><span class="hljs-comment">     * @memberof TumblrClient</span></li><li id="line841" class="line"><span class="hljs-comment">     */</span></li><li id="line842" class="line">    <span class="hljs-keyword">this</span>.createAudioPost = wrapCreatePost(<span class="hljs-string">'audio'</span>, [<span class="hljs-string">'data'</span>, <span class="hljs-string">'data64'</span>, <span class="hljs-string">'external_url'</span>]);</li><li id="line843" class="line"></li><li id="line844" class="line">    <span class="hljs-comment">/**</span></li><li id="line845" class="line"><span class="hljs-comment">     * Creates a photo post on the given blog</span></li><li id="line846" class="line"><span class="hljs-comment">     *</span></li><li id="line847" class="line"><span class="hljs-comment">     * @see {@link https://www.tumblr.com/docs/api/v2#pvideo-posts|API docs}</span></li><li id="line848" class="line"><span class="hljs-comment">     *</span></li><li id="line849" class="line"><span class="hljs-comment">     * @method createVideoPost</span></li><li id="line850" class="line"><span class="hljs-comment">     *</span></li><li id="line851" class="line"><span class="hljs-comment">     * @param  {string} blogIdentifier - blog name or URL</span></li><li id="line852" class="line"><span class="hljs-comment">     * @param  {Object} params - parameters sent with the request</span></li><li id="line853" class="line"><span class="hljs-comment">     * @param  {string} params.embed - embed code or a video URL</span></li><li id="line854" class="line"><span class="hljs-comment">     * @param  {Stream} params.data - a video file</span></li><li id="line855" class="line"><span class="hljs-comment">     * @param  {string} [params.caption] - post caption text</span></li><li id="line856" class="line"><span class="hljs-comment">     * @param  {TumblrClient~callback} [callback] - invoked when the request completes</span></li><li id="line857" class="line"><span class="hljs-comment">     *</span></li><li id="line858" class="line"><span class="hljs-comment">     * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line859" class="line"><span class="hljs-comment">     *</span></li><li id="line860" class="line"><span class="hljs-comment">     * @memberof TumblrClient</span></li><li id="line861" class="line"><span class="hljs-comment">     */</span></li><li id="line862" class="line">    <span class="hljs-keyword">this</span>.createVideoPost = wrapCreatePost(<span class="hljs-string">'video'</span>, [<span class="hljs-string">'data'</span>, <span class="hljs-string">'data64'</span>, <span class="hljs-string">'embed'</span>]);</li><li id="line863" class="line"></li><li id="line864" class="line">    <span class="hljs-comment">// Enable Promise mode</span></li><li id="line865" class="line">    <span class="hljs-keyword">if</span> (get(options, <span class="hljs-string">'returnPromises'</span>, <span class="hljs-literal">false</span>)) {</li><li id="line866" class="line">        <span class="hljs-keyword">this</span>.returnPromises();</li><li id="line867" class="line">    }</li><li id="line868" class="line">}</li><li id="line869" class="line"></li><li id="line870" class="line"><span class="hljs-comment">/**</span></li><li id="line871" class="line"><span class="hljs-comment"> * Performs a GET request</span></li><li id="line872" class="line"><span class="hljs-comment"> *</span></li><li id="line873" class="line"><span class="hljs-comment"> * @param  {string} apiPath - URL path for the request</span></li><li id="line874" class="line"><span class="hljs-comment"> * @param  {Object} params - query parameters</span></li><li id="line875" class="line"><span class="hljs-comment"> * @param  {TumblrClient~callback} [callback] - request callback</span></li><li id="line876" class="line"><span class="hljs-comment"> *</span></li><li id="line877" class="line"><span class="hljs-comment"> * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line878" class="line"><span class="hljs-comment"> */</span></li><li id="line879" class="line">TumblrClient.prototype.getRequest = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">apiPath, params, callback</span>) </span>{</li><li id="line880" class="line">    <span class="hljs-keyword">if</span> (isFunction(params)) {</li><li id="line881" class="line">        callback = params;</li><li id="line882" class="line">        params = {};</li><li id="line883" class="line">    }</li><li id="line884" class="line">    <span class="hljs-keyword">return</span> getRequest(<span class="hljs-keyword">this</span>.request.get, <span class="hljs-keyword">this</span>.credentials, <span class="hljs-keyword">this</span>.baseUrl, apiPath, <span class="hljs-keyword">this</span>.requestOptions, params, callback);</li><li id="line885" class="line">};</li><li id="line886" class="line"></li><li id="line887" class="line"><span class="hljs-comment">/**</span></li><li id="line888" class="line"><span class="hljs-comment"> * Performs a POST request</span></li><li id="line889" class="line"><span class="hljs-comment"> *</span></li><li id="line890" class="line"><span class="hljs-comment"> * @param  {string} apiPath - URL path for the request</span></li><li id="line891" class="line"><span class="hljs-comment"> * @param  {Object} params - form parameters</span></li><li id="line892" class="line"><span class="hljs-comment"> * @param  {TumblrClient~callback} [callback] - request callback</span></li><li id="line893" class="line"><span class="hljs-comment"> *</span></li><li id="line894" class="line"><span class="hljs-comment"> * @return {Request|Promise} Request object, or Promise if {@link returnPromises} was used</span></li><li id="line895" class="line"><span class="hljs-comment"> */</span></li><li id="line896" class="line">TumblrClient.prototype.postRequest = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">apiPath, params, callback</span>) </span>{</li><li id="line897" class="line">    <span class="hljs-keyword">if</span> (isFunction(params)) {</li><li id="line898" class="line">        callback = params;</li><li id="line899" class="line">        params = {};</li><li id="line900" class="line">    }</li><li id="line901" class="line">    <span class="hljs-keyword">return</span> postRequest(<span class="hljs-keyword">this</span>.request.post, <span class="hljs-keyword">this</span>.credentials, <span class="hljs-keyword">this</span>.baseUrl, apiPath, <span class="hljs-keyword">this</span>.requestOptions, params, callback);</li><li id="line902" class="line">};</li><li id="line903" class="line"></li><li id="line904" class="line"><span class="hljs-comment">/**</span></li><li id="line905" class="line"><span class="hljs-comment"> * Sets the client to return Promises instead of Request objects by patching the `getRequest` and</span></li><li id="line906" class="line"><span class="hljs-comment"> * `postRequest` methods on the client</span></li><li id="line907" class="line"><span class="hljs-comment"> */</span></li><li id="line908" class="line">TumblrClient.prototype.returnPromises = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</li><li id="line909" class="line">    <span class="hljs-keyword">this</span>.getRequest = promisifyRequest(<span class="hljs-keyword">this</span>.getRequest);</li><li id="line910" class="line">    <span class="hljs-keyword">this</span>.postRequest = promisifyRequest(<span class="hljs-keyword">this</span>.postRequest);</li><li id="line911" class="line">};</li><li id="line912" class="line"></li><li id="line913" class="line"><span class="hljs-comment">/**</span></li><li id="line914" class="line"><span class="hljs-comment"> * Adds GET methods to the client</span></li><li id="line915" class="line"><span class="hljs-comment"> *</span></li><li id="line916" class="line"><span class="hljs-comment"> * @param  {Object} methods - mapping of method names to endpoints</span></li><li id="line917" class="line"><span class="hljs-comment"> */</span></li><li id="line918" class="line">TumblrClient.prototype.addGetMethods = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">methods</span>) </span>{</li><li id="line919" class="line">    addMethods(<span class="hljs-keyword">this</span>, methods, <span class="hljs-string">'GET'</span>);</li><li id="line920" class="line">};</li><li id="line921" class="line"></li><li id="line922" class="line"><span class="hljs-comment">/**</span></li><li id="line923" class="line"><span class="hljs-comment"> * Adds POST methods to the client</span></li><li id="line924" class="line"><span class="hljs-comment"> *</span></li><li id="line925" class="line"><span class="hljs-comment"> * @param  {Object} methods - mapping of method names to endpoints</span></li><li id="line926" class="line"><span class="hljs-comment"> */</span></li><li id="line927" class="line">TumblrClient.prototype.addPostMethods = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">methods</span>) </span>{</li><li id="line928" class="line">    addMethods(<span class="hljs-keyword">this</span>, methods, <span class="hljs-string">'POST'</span>);</li><li id="line929" class="line">};</li><li id="line930" class="line"></li><li id="line931" class="line"><span class="hljs-comment">/**</span></li><li id="line932" class="line"><span class="hljs-comment"> * Handles the response from a client reuest</span></li><li id="line933" class="line"><span class="hljs-comment"> *</span></li><li id="line934" class="line"><span class="hljs-comment"> * @callback TumblrClient~callback</span></li><li id="line935" class="line"><span class="hljs-comment"> * @param {?Error} err - error message</span></li><li id="line936" class="line"><span class="hljs-comment"> * @param {?Object} resp - response body</span></li><li id="line937" class="line"><span class="hljs-comment"> * @param {?string} [response] - raw response</span></li><li id="line938" class="line"><span class="hljs-comment"> */</span></li><li id="line939" class="line"></li><li id="line940" class="line"><span class="hljs-comment">/*</span></li><li id="line941" class="line"><span class="hljs-comment"> * Please, enjoy our luxurious exports.</span></li><li id="line942" class="line"><span class="hljs-comment"> */</span></li><li id="line943" class="line"><span class="hljs-built_in">module</span>.exports = {</li><li id="line944" class="line">    <span class="hljs-comment">/**</span></li><li id="line945" class="line"><span class="hljs-comment">     * Passthrough for the {@link TumblrClient} class</span></li><li id="line946" class="line"><span class="hljs-comment">     *</span></li><li id="line947" class="line"><span class="hljs-comment">     * @memberof tumblr</span></li><li id="line948" class="line"><span class="hljs-comment">     * @see {@link TumblrClient}</span></li><li id="line949" class="line"><span class="hljs-comment">     */</span></li><li id="line950" class="line">    Client: TumblrClient,</li><li id="line951" class="line"></li><li id="line952" class="line">    <span class="hljs-comment">/**</span></li><li id="line953" class="line"><span class="hljs-comment">     * Creates a Tumblr Client</span></li><li id="line954" class="line"><span class="hljs-comment">     *</span></li><li id="line955" class="line"><span class="hljs-comment">     * @param  {Object} [options] - client options</span></li><li id="line956" class="line"><span class="hljs-comment">     * @param  {Object} [options.credentials] - OAuth credentials</span></li><li id="line957" class="line"><span class="hljs-comment">     * @param  {string} [options.baseUrl] - API base URL</span></li><li id="line958" class="line"><span class="hljs-comment">     * @param  {Object} [options.request] - library to use for making requests</span></li><li id="line959" class="line"><span class="hljs-comment">     *</span></li><li id="line960" class="line"><span class="hljs-comment">     * @return {TumblrClient} {@link TumblrClient} instance</span></li><li id="line961" class="line"><span class="hljs-comment">     *</span></li><li id="line962" class="line"><span class="hljs-comment">     * @memberof tumblr</span></li><li id="line963" class="line"><span class="hljs-comment">     * @see {@link TumblrClient}</span></li><li id="line964" class="line"><span class="hljs-comment">     */</span></li><li id="line965" class="line">    createClient: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{</li><li id="line966" class="line">        <span class="hljs-comment">// Support for `TumblrClient(credentials, baseUrl, requestLibrary)`</span></li><li id="line967" class="line">        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>) {</li><li id="line968" class="line">            options = {</li><li id="line969" class="line">                credentials: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],</li><li id="line970" class="line">                baseUrl: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>],</li><li id="line971" class="line">                request: <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>],</li><li id="line972" class="line">                returnPromises: <span class="hljs-literal">false</span>,</li><li id="line973" class="line">            };</li><li id="line974" class="line">        }</li><li id="line975" class="line"></li><li id="line976" class="line">        <span class="hljs-comment">// Create the Tumblr Client</span></li><li id="line977" class="line">        <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> TumblrClient(options);</li><li id="line978" class="line"></li><li id="line979" class="line">        <span class="hljs-keyword">return</span> client;</li><li id="line980" class="line">    },</li><li id="line981" class="line">};</li><li id="line982" class="line"></li></ol></code></pre>
        </article>
    </section>





</div>

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Jul 25 2016 16:32:48 GMT-0400 (EDT) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script src="scripts/main.js"></script>
</body>
</html>
